# AMLL Music Monitor

## 介绍

AMLL Music Monitor 是一款轻量级的命令行工具，用于**实时监控 AMLL Player 的播放内容**，并自动保存播放历史。它提供用户友好的彩色终端输出界面，支持自动刷新显示。此外，它还能生成详细的音乐统计报告，包括总体播放概览、最爱歌手和歌曲排行、每日播放趋势图等。

## 功能

- **实时监控**：实时检测正在播放的歌曲，并在终端显示。
- **自动保存播放历史**：将播放历史保存到 `amll_music_history.json`，并生成人类可读的 `music_playback.log`。
- **彩色终端输出**：支持自动刷新的彩色终端显示。
- **音乐统计报告**：生成包含以下内容的音乐统计报告：
  - 总体播放概览（累计播放次数、有效天数、累计时长）
  - 最爱歌手 TOP10（按真实累计次数）
  - 最爱歌曲 TOP10（按真实累计次数）
  - 每日播放趋势图
  - 24 小时播放分布图
  - 歌手词云图
- **无需安装 AMLL 插件**：直接读取 AMLL Player 的日志文件，无需额外插件。

## 快速开始

### 1. 安装依赖

```bash
pip install -r requirements.txt
pip install -r requirements-stats.txt
```

### 2. 启动监控

```bash
python main.py
```

终端将彩色显示当前播放，并实时追加日志。按 `Ctrl+C` 结束监控。

### 3. 生成音乐统计报告

```bash
python music_stats.py
```

在浏览器中打开 `stats/index.html` 查看音乐统计报告。

## 配置

- **日志路径**：编辑 `config.py` 中的 `_find_amll_log()` 函数来设置日志文件路径。
- **其他配置**：其他配置项也在 `config.py` 文件中。

## 依赖

- `requirements.txt` 列出了项目所需的所有依赖包。

## 常见问题

- **日志中没有作者信息**：确保 `music_tracker.py` 中的 `_save_to_playback_log` 函数格式正确。
- **网页中文乱码**：脚本会自动搜索系统中的黑体、苹方、NotoSansCJK 字体；如果仍有乱码问题，请手动指定字体路径。
- **想清空播放次数重新开始**：删除 `play_count.json` 文件即可归零。

## 备份

为了在新机器上无缝衔接累计次数，需要将以下文件一起拷贝：

- `amll_music_history.json`
- `music_playback.log`
- `play_count.json`
- `stats/`（如果需要保留旧网页）

## 致谢

感谢使用 AMLL Music Monitor！  
**Generated by KIMI AI @ Moonshot AI**